<html>
<head>
<title>BitFontMaker2 to BitmapFont converter</title>
<link href="style.css" rel="stylesheet" type="text/css"/>
<script src="bmfontconvert.js"></script>
</head>
<body>
<h1>BitFontMaker2 to Bitmap Text Font</h1>
<h2>About this tool</h2>
<p>
	This tool is for converting fonts made with <a href="https://www.pentacom.jp/pentacom/bitfontmaker2/" target="_blank">BitFontMaker2</a> into the <code>FNT</code> and <code>PNG</code> files needed to use them as true <a href="https://docs.phaser.io/phaser/concepts/gameobjects/bitmap-text" target="_blank">Bitmap Text</a> font that can be used with things like the <a href="https://phaser.io/" target="_blank">Phaser</a> game engine. 
</p>
<p>
	The "normal" way to do this kind of thing is to convert a TrueType font to a Bitmap Text font with <a href="https://www.angelcode.com/products/bmfont/" target="_blank">BMFont</a>. I find this really tedious when trying to make Bitmap Fonts for pixel games, because it is usually overkill and also requires a lot of fine-tuning for the final XML output. I am also using this for very small fonts like the ones created by bitfontmaker2.
	</p>
<p>
	This tool was developed by <a href="https://github.com/nuclearsecrecy/" target="_blank">Alex Wellerstein</a> in 2024-2025 for his own use. You are free to use it however you want. I do not claim any copyright on it. It is provided for your use with no warranties, guarantees, etc. Use at your own risk. I have no connection to the creators of BitFontMaker2 or Phaser. It does <b>not</b> take full advantange of the file format -- it just tries to get the job done. So each font is assumed to have a single page, etc.
</p>
<hr>
<h2>Instructions</h2>
<details class="tutorial">
	<summary>Click the arrow to show the tutorial/instructions.</summary>
<p>
	1. Create or open a copy of a font from the <a href="https://www.pentacom.jp/pentacom/bitfontmaker2" target="_blank">BitFontMaker2</a> website. For example, <a href="https://www.pentacom.jp/pentacom/bitfontmaker2/gallery/?id=14201" target="_blank">here</a> is one that I made with the exciting name of "FiveByFour" (its characters are based around an assumption of being five pixels tall and four pixels wide). 
</p>
<a href="images/tutorial1.jpg" target="_blank"><img src="images/tutorial1.jpg"/></a>	
<p>
	2. Click "Copy & Edit" to open it in the editor:
</p>
<a href="images/tutorial2.jpg" target="_blank"><img src="images/tutorial2.jpg"/></a>
<p>
	3. Click the the little icon that looks like a file with two triangles, which opens the "Data Import / Export" window:
</p>
<a href="images/tutorial3.jpg" target="_blank"><img src="images/tutorial3.jpg"/></a>
<p>
	The font data is all of that JSON code of numbers and symbols. Copy it to the clipboard (or download it and then copy it later).
</p>
<p>
	4. Come back to THIS page, and paste that JSON code into the <b>INPUT</b> section below. The default settings should be adequate but you can tweak them if you have some reason to. (Hover over the name of each setting for information about what it does.)
</p>
<p>
	5. You should probably just click the "<b>Convert</b>" button at this point. That will trigger the code which will create the <code>PNG</code> and <code>FNT</code> files in the <b>OUTPUT</b> section. You can then download them manually or click the two Download buttons to save them to your computer. If the output doesn't seem right, then you might take a look at the settings, but most of them are inferred from the pasted JSON and shouldn't need to be manually set.
</p>
<p>
	6. If you are using Phaser, you will then need to import the Bitmap Font files into your project to use them. Refer to the Phaser documentation on <a href="https://docs.phaser.io/phaser/concepts/gameobjects/bitmap-text"> target="_blank">Bitmap Text</a> for that.
</p>
<p>
	The code here is nothing fancy, and does not try to do any complicated "packing" algorithms for maximum efficiency: it will simply sort characters by their maximum height and then put them into the file line by line.
</p>
</details>
<hr>
<h2>INPUT</h2>
<div class="section_header">Paste BitFontMaker2 JSON code here: </div>
<div id="inputTextarea">
	<div id="jsonStatus"></div>
	<textarea id="json" onchange="checkJSON()" onkeyup="checkJSON()">{"33":[0,0,0,0,0,0,4,4,4,4,0,4,0,0,0,0],"34":[0,0,0,0,0,0,0,20,20,0,0,0,0,0,0,0],"35":[0,0,0,0,0,0,0,40,124,40,124,40,0,0,0,0],"36":[0,0,0,0,0,0,16,56,4,24,32,28,16,0,0,0],"37":[0,0,0,0,0,0,0,0,36,16,8,36,0,0,0,0],"38":[0,0,0,0,0,0,0,16,40,24,20,44,0,0,0,0],"39":[0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0],"40":[0,0,0,0,0,0,0,8,4,4,4,4,8,0,0,0],"41":[0,0,0,0,0,0,0,4,8,8,8,8,4,0,0,0],"42":[0,0,0,0,0,0,0,20,8,20,0,0,0,0,0,0],"43":[0,0,0,0,0,0,0,0,8,28,8,0,0,0,0,0],"44":[0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0],"45":[0,0,0,0,0,0,0,0,0,28,0,0,0,0,0,0],"46":[0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0],"47":[0,0,0,0,0,0,0,0,16,16,8,4,4,0,0,0],"48":[0,0,0,0,0,0,0,24,36,36,36,24,0,0,0,0],"49":[0,0,0,0,0,0,0,8,12,8,8,8,0,0,0,0],"50":[0,0,0,0,0,0,0,24,36,16,8,60,0,0,0,0],"51":[0,0,0,0,0,0,0,28,32,24,32,28,0,0,0,0],"52":[0,0,0,0,0,0,0,16,24,20,60,16,0,0,0,0],"53":[0,0,0,0,0,0,0,60,4,28,32,28,0,0,0,0],"54":[0,0,0,0,0,0,0,24,4,28,36,24,0,0,0,0],"55":[0,0,0,0,0,0,0,60,32,16,8,8,0,0,0,0],"56":[0,0,0,0,0,0,0,24,36,24,36,24,0,0,0,0],"57":[0,0,0,0,0,0,0,24,36,56,32,24,0,0,0,0],"58":[0,0,0,0,0,0,0,0,4,0,4,0,0,0,0,0],"59":[0,0,0,0,0,0,0,0,0,4,0,4,4,0,0,0],"60":[0,0,0,0,0,0,0,16,8,4,8,16,0,0,0,0],"61":[0,0,0,0,0,0,0,0,28,0,28,0,0,0,0,0],"62":[0,0,0,0,0,0,0,4,8,16,8,4,0,0,0,0],"63":[0,0,0,0,0,0,0,12,16,8,0,8,0,0,0,0],"64":[0,0,0,0,0,0,0,112,136,356,340,228,8,240,0,0],"65":[0,0,0,0,0,0,0,24,36,60,36,36,0,0,0,0],"66":[0,0,0,0,0,0,0,28,36,28,36,28,0,0,0,0],"67":[0,0,0,0,0,0,0,56,4,4,4,56,0,0,0,0],"68":[0,0,0,0,0,0,0,28,36,36,36,28,0,0,0,0],"69":[0,0,0,0,0,0,0,60,4,28,4,60,0,0,0,0],"70":[0,0,0,0,0,0,0,60,4,28,4,4,0,0,0,0],"71":[0,0,0,0,0,0,0,56,4,52,36,56,0,0,0,0],"72":[0,0,0,0,0,0,0,36,36,60,36,36,0,0,0,0],"73":[0,0,0,0,0,0,0,28,8,8,8,28,0,0,0,0],"74":[0,0,0,0,0,0,0,56,32,32,36,24,0,0,0,0],"75":[0,0,0,0,0,0,0,36,20,12,20,36,0,0,0,0],"76":[0,0,0,0,0,0,0,4,4,4,4,28,0,0,0,0],"77":[0,0,0,0,0,0,0,68,108,84,68,68,0,0,0,0],"78":[0,0,0,0,0,0,0,36,44,52,36,36,0,0,0,0],"79":[0,0,0,0,0,0,0,24,36,36,36,24,0,0,0,0],"80":[0,0,0,0,0,0,0,28,36,28,4,4,0,0,0,0],"81":[0,0,0,0,0,0,0,24,36,36,36,24,32,0,0,0],"82":[0,0,0,0,0,0,0,28,36,28,36,36,0,0,0,0],"83":[0,0,0,0,0,0,0,56,4,24,32,28,0,0,0,0],"84":[0,0,0,0,0,0,0,28,8,8,8,8,0,0,0,0],"85":[0,0,0,0,0,0,0,36,36,36,36,56,0,0,0,0],"86":[0,0,0,0,0,0,0,68,68,40,40,16,0,0,0,0],"87":[0,0,0,0,0,0,0,68,68,84,84,40,0,0,0,0],"88":[0,0,0,0,0,0,0,36,36,24,36,36,0,0,0,0],"89":[0,0,0,0,0,0,0,36,36,56,32,28,0,0,0,0],"90":[0,0,0,0,0,0,0,60,32,24,4,60,0,0,0,0],"91":[0,0,0,0,0,0,0,12,4,4,4,4,12,0,0,0],"92":[0,0,0,0,0,0,0,0,4,4,8,16,16,0,0,0],"93":[0,0,0,0,0,0,0,12,8,8,8,8,12,0,0,0],"96":[0,0,0,0,0,0,0,4,8,0,0,0,0,0,0,0],"97":[0,0,0,0,0,0,0,0,56,36,36,56,0,0,0,0],"98":[0,0,0,0,0,0,4,4,28,36,36,28,0,0,0,0],"99":[0,0,0,0,0,0,0,0,24,4,4,24,0,0,0,0],"100":[0,0,0,0,0,0,32,32,56,36,36,56,0,0,0,0],"101":[0,0,0,0,0,0,0,0,24,20,12,24,0,0,0,0],"102":[0,0,0,0,0,0,16,8,8,28,8,8,0,0,0,0],"103":[0,0,0,0,0,0,0,0,56,36,56,32,24,0,0,0],"104":[0,0,0,0,0,0,4,4,28,36,36,36,0,0,0,0],"105":[0,0,0,0,0,0,0,4,0,4,4,4,0,0,0,0],"106":[0,0,0,0,0,0,0,8,0,8,8,8,4,0,0,0],"107":[0,0,0,0,0,0,4,4,20,12,20,20,0,0,0,0],"108":[0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0],"109":[0,0,0,0,0,0,0,0,60,84,84,84,0,0,0,0],"110":[0,0,0,0,0,0,0,0,28,36,36,36,0,0,0,0],"111":[0,0,0,0,0,0,0,0,24,36,36,24,0,0,0,0],"112":[0,0,0,0,0,0,0,0,28,36,36,28,4,0,0,0],"113":[0,0,0,0,0,0,0,0,56,36,36,56,32,0,0,0],"114":[0,0,0,0,0,0,0,0,20,12,4,4,0,0,0,0],"115":[0,0,0,0,0,0,0,0,56,12,48,28,0,0,0,0],"116":[0,0,0,0,0,0,8,8,28,8,8,8,0,0,0,0],"117":[0,0,0,0,0,0,0,0,36,36,36,56,0,0,0,0],"118":[0,0,0,0,0,0,0,0,68,68,40,16,0,0,0,0],"119":[0,0,0,0,0,0,0,0,68,84,84,40,0,0,0,0],"120":[0,0,0,0,0,0,0,0,36,24,24,36,0,0,0,0],"121":[0,0,0,0,0,0,0,0,36,36,56,32,24,0,0,0],"122":[0,0,0,0,0,0,0,0,60,16,8,60,0,0,0,0],"181":[0,0,0,0,0,0,0,0,36,36,36,124,4,4,0,0],"name":"FiveByFour","copy":"OriginalbyNucleon","letterspace":"128","basefont_size":"512","basefont_left":"62","basefont_top":"0","basefont":"Arial","basefont2":"","ascender":"0","descender":"0","linegap":"0"}</textarea>	
</div>
<h2>SETTINGS</h2>
<p>
<details class="settings">
<summary>Font settings (will be inferred if left blank):</summary>
<ul>
	<li><abbr title="The name that will be used for the font and its files.">Font name:</abbr> <input type="text" id="name" value=""></li>
	<li><abbr title="The spacing between each character of the font.">Character spacing:</abbr> <input type="text" id="charSpace" value=""></li>
	<li><abbr title="The height of each line of the font. Should have space below for next line.">Line height:</abbr> <input type="text" id="lineHeight" value=""></li>
	<li><abbr title="The width of the space character. If blank, will be inferred.">Space width:</abbr> <input type="text" id="spaceWidth" value=""></li>
	<li><details class="advanced settings">
	<summary>Advanced settings</summary>
		<br><em>Note: You probably don't want to change these if you are using BitFontMaker2.</em>
		<ul>
			<li><abbr title="The height of the pixel grid for the font characters. Is 16 for BitFontMaker2 files.">Grid height:</abbr> <input type="text" id="gridHeight" value="16"></li>
			<li><abbr title="The width of the pixel grid for the font characters. Is 16 for BitFontMaker2 files.">Grid width:</abbr> <input type="text" id="gridWidth" value="16"></li>
			<li><abbr title="The x coordinate of the baseline (bottom left of characters). It is 2 for BitFontMaker2.">Baseline X:</abbr> <input type="text" id="baselineX" value="2"></li>
			<li><abbr title="The x coordinate of the baseline (bottom left of characters). It is 11 for BitFontMaker2.">Grid width:</abbr> <input type="text" id="baselineY" value="11"></li>
		</ul>
	</details>
	</li>
</ul>
</details>
</p>
<details class="settings">
<summary>Output settings:</summary>
<ul>
	<li><abbr title="The space to add between each character in the output file (in pixels)">Character padding:</abbr> <input type="text" id="space" value="1"></li>
	<li><abbr title="The maximum width of the output PNG file, in pixels (height will be determined by characters in font).">Max PNG width:</abbr> <input type="text" id="maxWidth" value="255"></li>
	<li><abbr title="The foreground color for the PNG file. Can be any valid CSS color.">Foreground color:</abbr> <input type="text" id="forecolor" value="#000000"></li>	
	<li><abbr title="The background color for the PNG file. Can be any valid CSS color, or -1 for transparent.">Background color:</abbr> <input type="text" id="backcolor" value="-1"></li>	
	<li><abbr title="The file name for the PNG and FNT files. If blank, will be inferred from name.">File name prefix:</abbr> <input type="text" id="outfile" value=""></li>
</ul>
</details>
</p>
<button id="convert" onclick="process()">Convert</button>

<h2>OUTPUT</h2>
PNG: <button id="download_png" disabled onclick="download_png()">Download PNG file</button>
<div id="img"></div> <br>
FNT: <button id="download_fnt" disabled  onclick="download_fnt()">Download FNT file</button><br>
<textarea id="fnt"></textarea>

</body>
</html>